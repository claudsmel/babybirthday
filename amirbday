<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Happy Birthday — For You</title>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Dancing+Script:wght@400;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#fff6fb;
      --accent:#b23b46; /* sexy dark red accent */
      --soft:#f6dfe6;
      --muted:#6b5b6f;
      --glass: rgba(255,255,255,0.6);
      --card-shadow: 0 8px 30px rgba(0,0,0,0.08);
    }

    html,body{height:100%;}
    body{
      margin:0;
      font-family: "Playfair Display", serif;
      background: linear-gradient(180deg,#fffafc 0%, #fff2f6 50%, #fff0f3 100%);
      color:var(--muted);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      overflow-x:hidden;
    }

    /* Page container */
    .wrap{
      max-width:980px;
      margin:40px auto;
      padding:28px;
      position:relative;
    }

    /* header / hero */
    .hero{
      display:flex;
      gap:20px;
      align-items:center;
      background: linear-gradient(180deg, rgba(255,255,255,0.75), rgba(255,255,255,0.6));
      border-radius:18px;
      padding:28px;
      box-shadow: var(--card-shadow);
      position:relative;
      overflow:visible;
    }

    .hero-left{flex:1;}
    .hero-right{width:220px; display:flex; justify-content:center; align-items:center; position:relative;}

    h1{
      margin:0 0 10px 0;
      font-size:2rem;
      color:var(--accent);
      letter-spacing:0.6px;
    }

    .subtitle{
      margin:0;
      font-size:1rem;
      color:#6b5566;
      line-height:1.4;
    }

    /* Elegant handwritten message */
    .handwritten{
      font-family: "Dancing Script", cursive;
      color:var(--accent);
      font-size:1.4rem;
      margin-top:10px;
    }

    /* gift box */
    .gift-wrap{
      width:160px;
      height:160px;
      background:linear-gradient(180deg,#fff, #f9e9ef);
      border-radius:18px;
      box-shadow: 0 18px 40px rgba(178,59,70,0.15);
      display:flex;
      align-items:center;
      justify-content:center;
      cursor:pointer;
      position:relative;
      user-select:none;
    }
    .ribbon{
      position:absolute;
      width:120%;
      height:26%;
      background:linear-gradient(90deg,#b23b46,#8d2b34);
      transform:rotate(20deg);
      top:44%;
      left:-10%;
      border-radius:6px;
      box-shadow:inset 0 -4px 6px rgba(255,255,255,0.08);
    }
    .bow{
      position:absolute;
      top:6%;
      right:22%;
      width:44px; height:44px;
      transform:rotate(-15deg);
    }
    .bow:before, .bow:after{
      content:""; position:absolute; width:24px; height:40px; border-radius:14px;
      background:linear-gradient(180deg,#b23b46,#8d2b34);
    }
    .bow:before{left:0; transform:rotate(-30deg);}
    .bow:after{right:0; transform:rotate(30deg);}

    /* explosion stage (balloons, cake) */
    .explosion{
      pointer-events:none;
      position:fixed;
      inset:0;
      z-index:60;
    }

    /* balloons */
    .balloon{
      width:48px; height:64px;
      border-radius:50% 50% 48% 48%;
      position:absolute;
      transform-origin:center bottom;
      animation:floatUp 6s ease-in forwards;
      box-shadow: 0 8px 18px rgba(0,0,0,0.09);
    }
    @keyframes floatUp{
      0%{ transform: translateY(0) scale(0.8); opacity:0;}
      20%{ opacity:1;}
      100%{ transform: translateY(-520px) scale(1.05) rotate(-6deg); opacity:1;}
    }
    .string{ width:2px; height:80px; background:linear-gradient(#ddd,#ccc); position:absolute; left:50%; transform:translateX(-50%); bottom:-78px; border-radius:2px; }

    /* cake */
    .cake {
      width:120px; height:120px; border-radius:12px;
      background: linear-gradient(180deg,#fff,#fde8ef);
      position: absolute;
      left:50%;
      transform: translateX(-50%) translateY(80px) scale(0.8);
      bottom:70px;
      box-shadow: 0 20px 40px rgba(0,0,0,0.12);
      animation:popIn 650ms ease-out forwards;
      display:flex; align-items:center; justify-content:center;
      flex-direction:column;
    }
    .cake .candle{
      width:6px; height:26px; background:#ffdd55; border-radius:3px; position:relative; margin-bottom:6px;
    }
    .flame{
      width:12px; height:12px; border-radius:50%;
      background: radial-gradient(circle at 30% 20%, #fff5b1, #ffb23b 60%, #ff6b3b 100%);
      position:absolute; top:-10px; left:50%; transform:translateX(-50%) scale(1);
      filter:drop-shadow(0 2px 6px rgba(255,120,60,0.25));
      animation:flicker 900ms infinite;
    }
    @keyframes flicker{
      0%{ transform:translateX(-50%) scale(1); opacity:1;}
      50%{ transform:translateX(-49%) scale(1.05); opacity:0.9;}
      100%{ transform:translateX(-51%) scale(0.98); opacity:1;}
    }
    @keyframes popIn{
      0%{ transform: translateX(-50%) translateY(80px) scale(0.6); opacity:0;}
      60%{ transform: translateX(-50%) translateY(0) scale(1.05); opacity:1;}
      100%{ transform: translateX(-50%) translateY(0) scale(1); }
    }

    /* memory cards */
    .memories{
      margin-top:26px;
      display:grid;
      grid-template-columns: repeat(auto-fit,minmax(220px,1fr));
      gap:16px;
    }
    .card{
      background:var(--glass);
      border-radius:14px;
      padding:14px;
      backdrop-filter: blur(6px) saturate(1.05);
      box-shadow: var(--card-shadow);
      cursor:pointer;
      transition: transform .25s ease, box-shadow .25s ease;
      position:relative;
    }
    .card:hover{ transform: translateY(-6px); box-shadow: 0 28px 60px rgba(0,0,0,0.12); }
    .card h4{ margin:0 0 8px 0; color:var(--accent); font-size:1rem;}
    .card p{ margin:0; font-size:0.95rem; color:#5b4558; line-height:1.35; min-height:58px; }

    /* overlay for memory popup */
    .overlay{
      position:fixed; inset:0; background:rgba(12,8,10,0.45); display:none; z-index:70; align-items:center; justify-content:center;
      padding:20px;
    }
    .overlay.open{ display:flex; }
    .popup{
      width:100%; max-width:720px; background:white; border-radius:14px; padding:20px; box-shadow: 0 28px 80px rgba(0,0,0,0.25);
      animation:slideUp .32s ease;
    }
    @keyframes slideUp{ from{ transform:translateY(18px); opacity:0;} to{ transform:translateY(0); opacity:1;} }

    .popup img{ max-width:100%; border-radius:10px; display:block; margin-bottom:12px; }

    /* floating hearts */
    .hearts{ pointer-events:none; position:fixed; inset:0; z-index:10; overflow:visible;}
    .heart{
      position:absolute; width:18px; height:18px; transform:translate(-50%,-50%) scale(0.9); opacity:0.9;
      background:linear-gradient(180deg,#ff7aa2,#ff3b6d);
      clip-path: polygon(50% 85%, 6% 35%, 20% 0%, 50% 20%, 80% 0%, 94% 35%);
      animation:rise 4200ms linear infinite;
    }
    @keyframes rise{
      0%{ transform: translateY(120vh) scale(.6); opacity:0;}
      20%{ opacity:1;}
      100%{ transform: translateY(-40vh) scale(1.1); opacity:0; }
    }

    /* footer / actions */
    .actions{ margin-top:18px; display:flex; gap:12px; flex-wrap:wrap; }
    button.primary{
      background: linear-gradient(90deg,#b23b46,#8d2b34);
      color:white; padding:10px 16px; border-radius:10px; border:0; font-weight:600; cursor:pointer;
      box-shadow: 0 10px 26px rgba(178,59,70,0.18);
    }
    button.ghost{ background:transparent; border:1px solid rgba(107,91,111,0.12); padding:10px 14px; border-radius:10px; cursor:pointer; }

    /* responsive tweaks */
    @media (max-width:640px){
      h1{ font-size:1.6rem; }
      .hero{ flex-direction:column; gap:18px; }
      .hero-right{ width:180px; }
      .gift-wrap{ width:140px; height:140px; }
    }
  </style>
</head>
<body>
  <div class="wrap">

    <div class="hero" aria-labelledby="greeting">
      <div class="hero-left">
        <h1 id="greeting">Happy Birthday, my love ❤️</h1>
        <p class="subtitle">Today is the day the world got a little brighter — and I got so lucky.</p>
        <div class="handwritten">— Always yours, <span id="senderName">[Your name]</span></div>

        <div class="actions" style="margin-top:14px;">
          <button class="primary" id="openGiftBtn" aria-haspopup="true" aria-controls="gift">Open Your Gift</button>
          <button class="ghost" id="revealLetterBtn">Read my love letter</button>
        </div>
      </div>

      <div class="hero-right">
        <div class="gift-wrap" id="gift" title="Click to open the gift">
          <div class="ribbon"></div>
          <div class="bow"></div>
        </div>
      </div>
    </div>

    <!-- Love letter section -->
    <section id="letter" style="margin-top:20px; display:none;">
      <div style="background:linear-gradient(180deg, rgba(255,255,255,0.9), rgba(255,240,246,0.9)); padding:18px; border-radius:12px; box-shadow: var(--card-shadow);">
        <h3 style="margin:0 0 8px 0; color:var(--accent);">A letter for you</h3>
        <p style="margin:0; color:#574655; line-height:1.6;">
          <!-- default content, replace with your personal message -->
          When I look at you, I find home in the softest places — in your laugh, the way you hold my hand, and the little ways you make ordinary afternoons feel like secret holidays. Today, and every day, I celebrate you. Happy birthday.
        </p>
      </div>
    </section>

    <!-- Memories grid -->
    <div class="memories" aria-live="polite" style="margin-top:18px;">
      <div class="card" data-title="First Date" data-img="" data-text="Remember our first date? You wore that silly hat and laughed when my fries fell.">
        <h4>First Date</h4>
        <p>Remember our first date? You wore that silly hat and laughed when my fries fell.</p>
      </div>

      <div class="card" data-title="Road Trip" data-img="" data-text="That midnight road trip when the radio played our song. We sang terribly but perfectly.">
        <h4>Road Trip</h4>
        <p>That midnight road trip when the radio played our song. We sang terribly but perfectly.</p>
      </div>

      <div class="card" data-title="Lazy Sundays" data-img="" data-text="The way we'd stay in bed until noon and make pancakes like it's an art.">
        <h4>Lazy Sundays</h4>
        <p>The way we'd stay in bed until noon and make pancakes like it's an art.</p>
      </div>

      <div class="card" data-title="Your Smile" data-img="" data-text="You smile and the room changes — that's my favorite magic trick.">
        <h4>Your Smile</h4>
        <p>You smile and the room changes — that's my favorite magic trick.</p>
      </div>
    </div>

    <!-- memory overlay popup -->
    <div class="overlay" id="overlay" role="dialog" aria-modal="true" aria-hidden="true">
      <div class="popup" role="document" aria-labelledby="popupTitle">
        <button id="closePopup" style="float:right;border:0;background:transparent;font-size:18px;cursor:pointer;">✕</button>
        <h3 id="popupTitle">Memory</h3>
        <img id="popupImg" alt="" style="display:none;">
        <p id="popupText" style="margin-top:8px; color:#5b4558; line-height:1.5;"></p>
      </div>
    </div>

  </div>

  <!-- floating hearts container -->
  <div class="hearts" aria-hidden="true"></div>

  <!-- explosion container -->
  <div class="explosion" id="explosion" aria-hidden="true"></div>

  <!-- audio elements -->
  <audio id="bgMusic" loop preload="metadata">
    <!-- Replace src with your own hosted audio file or stream. -->
  </audio>

  <audio id="birthdaySong" preload="auto">
    <!-- Replace src with your own small birthday melody file if you'd like -->
  </audio>

  <!-- small play overlay -->
  <div id="playOverlay" style="position:fixed; left:0; top:0; right:0; bottom:0; display:flex; align-items:center; justify-content:center; z-index:80; pointer-events:none;">
    <button id="playBtn" style="pointer-events:auto; border:0; background:linear-gradient(90deg,#b23b46,#8d2b34); color:white; padding:14px 18px; border-radius:12px; font-size:16px; box-shadow: 0 18px 40px rgba(178,59,70,0.22);">Play music & open gift</button>
  </div>

  <script>
    // ---------- CONFIG ----------
    const config = {
      sender: "[Your name]", // change to your name
      bgMusicURL: "", // supply a URL or file path e.g. "assets/my-boo-short.mp3"
      birthdaySongURL: "" // optional short birthday clip
    };
    // ----------------------------

    document.getElementById('senderName').textContent = config.sender;
    const bgMusic = document.getElementById('bgMusic');
    const bdaySong = document.getElementById('birthdaySong');

    if (config.bgMusicURL) bgMusic.src = config.bgMusicURL;
    if (config.birthdaySongURL) bdaySong.src = config.birthdaySongURL;

    // play overlay handling (to satisfy autoplay rules)
    const playOverlay = document.getElementById('playOverlay');
    const playBtn = document.getElementById('playBtn');
    playBtn.addEventListener('click', async () => {
      try {
        if (bgMusic.src) await bgMusic.play();
      } catch(e){ console.warn('Music blocked or not available', e); }
      // hide overlay
      playOverlay.style.display = "none";

      // open gift automatically for theatrical effect
      triggerExplosion();
    });

    // open gift button
    const gift = document.getElementById('gift');
    document.getElementById('openGiftBtn').addEventListener('click', () => {
      // if overlay is visible, trigger overlay action
      if (playOverlay.style.display !== "none") {
        playBtn.click();
        return;
      }
      triggerExplosion();
      try { if (bgMusic.src && bgMusic.paused) bgMusic.play(); } catch(e){}
    });

    // secondary open via clicking the gift itself
    gift.addEventListener('click', () => document.getElementById('openGiftBtn').click());

    // reveal love letter
    const revealLetterBtn = document.getElementById('revealLetterBtn');
    revealLetterBtn.addEventListener('click', () => {
      const letter = document.getElementById('letter');
      letter.style.display = letter.style.display === 'none' ? 'block' : 'none';
      letter.scrollIntoView({behavior:'smooth', block:'center'});
    });

    // Memories popups
    document.querySelectorAll('.card').forEach(card => {
      card.addEventListener('click', () => {
        const ov = document.getElementById('overlay');
        const title = card.dataset.title || "Memory";
        const img = card.dataset.img || "";
        const text = card.dataset.text || card.querySelector('p').textContent || '';

        document.getElementById('popupTitle').textContent = title;
        const popupImg = document.getElementById('popupImg');
        if (img) { popupImg.src = img; popupImg.style.display = 'block'; } else { popupImg.style.display = 'none'; }
        document.getElementById('popupText').textContent = text;

        ov.classList.add('open');
        ov.setAttribute('aria-hidden','false');
      });
    });
    document.getElementById('closePopup').addEventListener('click', () => {
      const ov = document.getElementById('overlay');
      ov.classList.remove('open');
      ov.setAttribute('aria-hidden','true');
    });
    document.getElementById('overlay').addEventListener('click', (e) => {
      if (e.target === e.currentTarget) {
        e.currentTarget.classList.remove('open');
        e.currentTarget.setAttribute('aria-hidden','true');
      }
    });

    // floating hearts: create many hearts with random timings
    (function spawnHearts(){
      const container = document.querySelector('.hearts');
      for (let i=0;i<12;i++){
        const el = document.createElement('div');
        el.className = 'heart';
        el.style.left = Math.random() * 100 + '%';
        el.style.bottom = (Math.random()*20 - 10) + 'vh';
        el.style.animationDelay = (Math.random()*4) + 's';
        el.style.opacity = (0.6 + Math.random()*0.4);
        el.style.transform = `translate(-50%,-50%) scale(${0.8 + Math.random()*0.6})`;
        container.appendChild(el);
      }
    })();

    // ---------- EXPLOSION (balloons + cake + message) ----------
    function random(min,max){ return Math.round(min + Math.random()*(max-min)); }

    function triggerExplosion(){
      const ex = document.getElementById('explosion');
      ex.innerHTML = ""; // reset
      ex.style.pointerEvents = 'none';

      // flying balloons
      const colors = ['#ff6b8a','#ff9fb7','#c33b44','#ffb3cd','#b23b46','#ffd6e1'];
      const count = 8;
      for (let i=0;i<count;i++){
        const b = document.createElement('div');
        b.className = 'balloon';
        b.style.background = `radial-gradient(circle at 30% 20%, #fff, ${colors[i%colors.length]})`;
        // start position around center-right of hero
        const startLeft = 30 + Math.random()*40; // percent
        b.style.left = startLeft + '%';
        b.style.bottom = '36px';
        b.style.animationDelay = (i*90)+'ms';
        b.style.transform = 'translateY(0) scale(0.85)';
        // small horizontal drift
        b.style.setProperty('--drift', (Math.random()*80 - 40) + 'px');
        // string
        const s = document.createElement('div');
        s.className = 'string';
        b.appendChild(s);
        ex.appendChild(b);
      }

      // cake
      const cake = document.createElement('div');
      cake.className = 'cake';
      // candle + flame
      const candle = document.createElement('div');
      candle.className = 'candle';
      const flame = document.createElement('div');
      flame.className = 'flame';
      candle.appendChild(flame);
      cake.appendChild(candle);
      ex.appendChild(cake);

      // overlay text message
      const msg = document.createElement('div');
      msg.style.position='absolute';
      msg.style.left='50%'; msg.style.transform='translateX(-50%)';
      msg.style.top='20%';
      msg.style.fontSize='20px';
      msg.style.color='white';
      msg.style.textAlign='center';
      msg.style.fontWeight='700';
      msg.style.textShadow='0 4px 18px rgba(0,0,0,0.45)';
      msg.textContent = 'You’ll always be my best gift.';
      ex.appendChild(msg);

      // small confetti pop effect using hearts quickly
      for (let i=0;i<20;i++){
        const h = document.createElement('div');
        h.className = 'heart';
        h.style.left = (50 + Math.random()*40 - 20) + '%';
        h.style.bottom = (20 + Math.random()*20) + 'vh';
        h.style.width = (8 + Math.random()*18)+'px';
        h.style.height = h.style.width;
        h.style.animation = `rise ${2 + Math.random()*2}s linear forwards`;
        h.style.opacity = '1';
        ex.appendChild(h);
      }

      // attempt to play birthday song once
      try{
        if (bdaySong.src) bdaySong.play();
      }catch(e){ /* noop */ }

      // remove explosion after some time (so it can be triggered again)
      setTimeout(()=> { ex.innerHTML = ""; }, 7000);
    }

    // allow keyboard activation (enter key) for accessibility on gift
    gift.addEventListener('keydown', (e) => {
      if (e.key === 'Enter' || e.key === ' ') {
        e.preventDefault(); gift.click();
      }
    });

    // small UI: optionally prefill memory image links and senders via URL query
    (function applyURLConfig(){
      try{
        const params = new URLSearchParams(location.search);
        if (params.get('sender')) document.getElementById('senderName').textContent = params.get('sender');
        // allow quick set for bg music
        if (params.get('bg')) {
          bgMusic.src = params.get('bg');
        }
      }catch(e){}
    })();

    // end of script
  </script>
</body>
</html>
